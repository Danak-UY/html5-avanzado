<!DOCTYPE html>
<html>
<head>
	<title>
		Event Source
	</title>
	<meta charset='utf-8'>
</head>
<body>
	<script>
	if(window.EventSource){
		var server_listener = new EventSource('server.php');
		server_listener.addEventListener('open',function(e){
			console.log("La conexion se ha establecido");
		},false);

		server_listener.addEventListener('error',function(e){
			if(e.readyState == EventSource.CLOSED){
				console.log('El servidor ha cerrado la conexion');
			}
			//else console.log(e);
		},false);

		server_listener.addEventListener('message',function(e){
			console.log(e.data);
		},false);
		server_listener.addEventListener('evento',function(e){
			console.log(e.data);
		},false);
	}
	</script>
</body>
</html>